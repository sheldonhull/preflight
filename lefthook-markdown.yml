# Remote Lefthook Configuration for Markdown Linting
#
# This configuration provides Docker-based markdown linting with markdownlint-cli2
# and the sentences-per-line custom plugin.
#
# Usage in other repositories:
#   Add to your lefthook.yml:
#
#   remotes:
#     - git_url: https://github.com/YOUR_ORG/lefthook
#       ref: main  # or specific tag/branch
#
# The Docker image will be automatically pulled during lefthook install.

# Install hook - pulls the Docker image so it's ready when hooks run
install:
  commands:
    pull-markdownlint-image:
      run: docker pull lefthook/markdownlint-cli2:latest || echo "Warning: Could not pull image. Please build it locally or contact repository maintainer."

# Pre-commit hook - automatically fix markdown issues
pre-commit:
  commands:
    markdownlint-fmt:
      glob: "*.{md,markdown}"
      run: |
        docker run --rm \
          -v "$(pwd):/workspace" \
          -w /workspace \
          lefthook/markdownlint-cli2:latest \
          markdownlint-cli2 --fix "**/*.{md,markdown}" "#node_modules" "#vendor" "#.git"
      stage_fixed: true

# Pre-push hook - validate markdown (no auto-fix)
pre-push:
  commands:
    markdownlint-check:
      glob: "*.{md,markdown}"
      run: |
        docker run --rm \
          -v "$(pwd):/workspace" \
          -w /workspace \
          lefthook/markdownlint-cli2:latest \
          markdownlint-cli2 "**/*.{md,markdown}" "#node_modules" "#vendor" "#.git"
